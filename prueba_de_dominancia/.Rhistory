# UI para etapa 1
output$etapa1_ui <- renderUI({
checkboxGroupInput(
"etapa1",
label = "Selecciona exactamente 8 habilidades:",
choices = opciones_combinadas,
selected = character(0)
)
})
# ValidaciÃ³n etapa 1
observe({
if(!is.null(input$etapa1) && length(input$etapa1) == 8) {
shinyjs::enable("next1")
} else {
shinyjs::disable("next1")
}
})
# Avanzar a etapa 2
observeEvent(input$next1, {
if(length(input$etapa1) == 8) {
selections$etapa1_ids <- input$etapa1
selections$etapa1_labels <- checkbox_labels[input$etapa1]
selections$no_seleccionadas_ids <- setdiff(checkbox_ids, input$etapa1)
selections$no_seleccionadas_labels <- checkbox_labels[selections$no_seleccionadas_ids]
stage(2)
}
})
# UI para etapa 2
output$etapa2_ui <- renderUI({
if(stage() == 2 && length(selections$etapa1_ids) > 0) {
radioButtons(
"etapa2_input",
label = "Selecciona tu habilidad principal:",
choices = setNames(selections$etapa1_ids, selections$etapa1_labels)
)
} else {
p("Cargando opciones...")
}
})
# Avanzar a etapa 3
observeEvent(input$next2, {
if(!is.null(input$etapa2_input) && nchar(input$etapa2_input) > 0) {
selections$etapa2_id <- input$etapa2_input
selections$etapa2_label <- checkbox_labels[input$etapa2_input]
stage(3)
}
})
# UI para etapa 3
output$etapa3_ui <- renderUI({
if(stage() == 3 && length(selections$no_seleccionadas_ids) > 0) {
radioButtons(
"etapa3_input",
label = "Selecciona 1 habilidad de las no elegidas:",
choices = setNames(selections$no_seleccionadas_ids, selections$no_seleccionadas_labels)
)
} else {
p("Cargando opciones...")
}
})
# Avanzar a etapa 4
observeEvent(input$next3, {
if(!is.null(input$etapa3_input) && nchar(input$etapa3_input) > 0) {
selections$etapa3_id <- input$etapa3_input
selections$etapa3_label <- checkbox_labels[input$etapa3_input]
stage(4)
}
})
# Botones para retroceder
observeEvent(input$back1, {
stage(1)
})
observeEvent(input$back2, {
stage(2)
})
observeEvent(input$back3, {
stage(3)
})
# Reiniciar
observeEvent(input$reset, {
stage(1)
for(n in names(selections)) selections[[n]] <- character(0)
if(!is.null(input$etapa1)) updateCheckboxGroupInput(session, "etapa1", selected = character(0))
})
output$stage <- reactive({
stage()
})
outputOptions(output, "stage", suspendWhenHidden = FALSE)
# Resultados finales
output$resumen_final <- renderText({
if(stage() == 4) {
paste(
"RESUMEN FINAL:\n",
"=", rep("=", 30), "\n\n",
"ETAPA 1 - 8 Habilidades seleccionadas:\n",
paste("â€¢", selections$etapa1_labels, collapse = "\n"), "\n\n",
"ETAPA 2 - Habilidad principal:\n",
paste("â€¢", selections$etapa2_label), "\n\n",
"ETAPA 3 - De las no elegidas:\n",
paste("â€¢", selections$etapa3_label), "\n\n"
#"IDENTIFICADORES INTERNOS:\n",
#"Etapa 1: ", paste(selections$etapa1_ids, collapse = ", "), "\n",
#"Etapa 2: ", selections$etapa2_id, "\n",
#"Etapa 3: ", selections$etapa3_id
)
}
})
# Progreso
output$progreso <- renderText({
etapas <- c(
"1: Seleccionar 8 de 16 habilidades",
"2: Elegir tu habilidad principal",
"3: Seleccionar 1 de las 8 no elegidas",
"4: Ver resultados finales"
)
paste("Etapa", stage(), "de 4 -", etapas[stage()])
})
# Resumen actual
output$summary <- renderText({
text <- ""
if(stage() >= 2 && length(selections$etapa1_labels) > 0) {
text <- paste0(text,
"ðŸ”¹ Etapa 1 (8 seleccionadas):\n",
paste("â€¢", selections$etapa1_labels, collapse = "\n"), "\n\n")
}
if(stage() >= 3 && nchar(selections$etapa2_label) > 0) {
text <- paste0(text,
"ðŸŒŸ Etapa 2 (Habilidad principal):\n",
"â€¢ ", selections$etapa2_label, "\n\n")
}
if(stage() >= 4 && nchar(selections$etapa3_label) > 0) {
text <- paste0(text,
"ðŸ”„ Etapa 3 (De las no elegidas):\n",
"â€¢ ", selections$etapa3_label, "\n")
}
text
})
# Valores internos
#output$valores_internos <- renderText({
#  text <- ""
#
#  if(stage() >= 2 && length(selections$etapa1_ids) > 0) {
#    text <- paste0(text, "IDs Etapa 1: ", paste(selections$etapa1_ids, collapse = ", "), "\n")
#  }
#
#  if(stage() >= 3 && nchar(selections$etapa2_id) > 0) {
#    text <- paste0(text, "ID Etapa 2: ", selections$etapa2_id, "\n")
#  }
#
#  if(stage() >= 4 && nchar(selections$etapa3_id) > 0) {
#    text <- paste0(text, "ID Etapa 3: ", selections$etapa3_id)
#  }
#  text
#})
}
shinyApp(ui = ui, server = server)
setNames(checkbox_ids, checkbox_labels[checkbox_ids])
library(shiny)
ui <- fluidPage(
#aÃ±adimos de fondo el fondo de la universidad
tags$head(
tags$style(HTML("
body {
background-image: url('fondo_dashboards.jpg');
background-size: cover;
background-repeat: repeat;
background-attachment: fixed;
}
"))
),
titlePanel("PRUEBA DE DOMINANCIA CEREBRAL"),
h1("La Universidad CuauhtÃ©moc, Plantel QuerÃ©taro, A.C. con domicilio en Blvd.
Bernardo Quintana Arrioja No. 229 A, Fraccionamiento Los Arcos, Santiago de
QuerÃ©taro, Qro. MÃ©xico, utilizara sus datos personales y sensibles para la
identificaciÃ³n, operacion, administraciÃ³n y anÃ¡logos, que sean necesarios
para la prestaciÃ³n de los servicios acadÃ©micos y administrativos de la
Universidad CuauhtÃ©moc Plantel QUerÃ©taro, A.C. Para mayor informaciÃ³n usted
puede acceder al aviso de privacidad en https://www.ucq.edu.mx/uc ",
style="font-size:10px;"),
#encabezados previos a los datos personales
h1("Al dÃ­a de hoy, Â¿quÃ© parte del cerebro estas utilizando mÃ¡s",
style = "font-size:16px;"),
h1("De acuerdo a esa parte de tu cerebro, Â¿quÃ© carrera UCQ te harÃ¡ mÃ¡s exitoso?",
style = "font-size:16px;"),
#donde van los datos personales del que esta contestando
fluidRow(column(6,textInput("nombre", "Nombre completo")),
column(6,numericInput("edad", "Edad",value = NA, min = 1, max = 120))),
fluidRow(column(6,textInput("carrera", "Carrera a la que aspiras")),
column(6,dateInput("f_nacimiento", "Fecha de nacimiento"))),
fluidRow(column(6,textInput("escuela", "Escuela de procedencia")),
column(6,textInput("grado", "Grado"))),
fluidRow(column(6,textInput("correo", "Correo electrÃ³nico")),
column(6,numericInput("telefono", "TelÃ©fono",value = NA, min = 0, max = 999999999999))),
fluidRow(column(6,textInput("tutor", "Nombre completo (tutor)"))),
fluidRow(column(6,textInput("correo_tutor", "Correo electrÃ³nico (tutor)")),
column(6,numericInput("telefono_tutor", "TÃ©lefono (tutor)",value = NA, min = 0, max = 999999999999))),
#Aqui van a ir las tres diferentes partes de la prueba en una columna lateral
sidebarLayout(
sidebarPanel(
# Etapa 1: seleccionar 8 de los 16 elementos
conditionalPanel(
condition = "output.stage == 1",
h3("Analiza los siguientes 16 elementos laborales listados y marca la
casilla de los ocho elementos que consideras Realizar mejor.",
style = "font-size:16px;"),
uiOutput("etapa1_ui"),
actionButton("next1", "Continuar parte 2"),
),
# Etapa 2: Seleccionar 1 de las 5 anteriores
conditionalPanel(
condition = "output.stage == 2",
h3("De los ocho elementos seleccionados, marca con un circulo aquel que
te Agrade/guste mÃ¡s hacer", style = "font-size:16px;"),
uiOutput("etapa2_ui"),  # Cambiado a uiOutput para evitar el error
br(),
actionButton("next2", "Continuar parte 3"),
actionButton("back1", "Volver a la parte 1")
),
# Etapa 3: Mostrar las 5 no seleccionadas al inicio
conditionalPanel(
condition = "output.stage == 3",
h3("De los ocho elementos que no seleccionaste, marca aquel elemento que
menos te agrade o menos te guste hacer", style = "font-size:16px;"),
verbatimTextOutput("etapa3_ui"),
br(),
actionButton("back2", "Volver a Etapa 2"),
actionButton("next3", "Ver Resultados Finales")
),
# Etapa 4: Resultados finales
conditionalPanel(
condition = "output.stage == 4",
h3("Resultados Finales"),
h4("Resumen de todas tus selecciones:"),
verbatimTextOutput("resumen_final"),
br(),
actionButton("back3", "Volver a Etapa 3"),
actionButton("reset", "Comenzar de nuevo")
)
),
mainPanel(
h3("Progreso"),
textOutput("progreso"),
br(),
h3("Selecciones Actuales"),
verbatimTextOutput("summary")
#h4("IDs Internos:"),
#verbatimTextOutput("valores_internos")
)
)
)
server <- function(input, output, session) {
# AquÃ­ se definen las abreviaciones y el nombre completpo de los elementos
#laborales que es lo que vera el usuario
checkbox_ids <- c(
"ana","admin","concep","expre",
"inte","redac","aspt","imp",
"plan","aspi","res","ino",
"entf","org","aspc","aspf"
)
checkbox_labels <- c(
ana = "AnÃ¡lisis",
admin = "AdministraciÃ³n",
concep = "ConceptualizaciÃ³n",
expre = "ExpresiÃ³n de ideas",
inte = "IntegraciÃ³n",
redac = "RedacciÃ³n",
aspt = "Aspectos tÃ©cnicos",
imp = "ImplantaciÃ³n",
plan = "PlaneaciÃ³n",
aspi = "Aspectos interpersonales",
res = "ResoluciÃ³n de problemas lÃ³gicos",
ino = "InnovaciÃ³n",
entf = "Entrenamiento / FormaciÃ³n",
org = "OrganizaciÃ³n",
aspc = "Aspectos creativos",
aspf = "Aspectos financieros"
)
# Crear opciones combinadas
#aquie se hace match de los ids con el nombre de las selcciones
opciones_combinadas <- setNames(checkbox_ids, checkbox_labels[checkbox_ids])
#crea una variable reactiva que almacena un valor (en este caso, el nÃºmero 1)
#y que puede cambiar durante la ejecuciÃ³n de la app, disparando reactividad en
#todo lo que dependa de ella.
stage <- reactiveVal(1)
#aquÃ­ se definen las variables que van a ir definiendo durante la ejecuciÃ³n
#de la prueba y todas estÃ¡n almacenadas en selections
selections <- reactiveValues(
etapa1_ids = character(0),
etapa1_labels = character(0),
etapa2_id = character(0),
etapa2_label = character(0),
etapa3_id = character(0),
etapa3_label = character(0),
no_seleccionadas_ids = character(0),
no_seleccionadas_labels = character(0)
)
#aquÃ­ indicamos que se va inicializar useShinyjs para poder regresar a cambiar
#respuestas
shinyjs::useShinyjs()
# UI para etapa 1
#aqui se activa la primer parte de la prueba
#se renderiza la salida de la etapa 1
output$etapa1_ui <- renderUI({
checkboxGroupInput(
#se va a llamar etapa 1 primer grupo de cajas
"etapa1",
#una pequeÃ±a instruccion
label = "Selecciona exactamente 8 habilidades:",
#aqui se indica que las checkbox que aparecen sean todas las opciones que
#estan guardadas en la variable opciones combinadas
choices = opciones_combinadas,
selected = character(0)
)
})
# ValidaciÃ³n etapa 1
#observe se refiere a que revisa el input del usuario constantemente durante
#la etapa 1
observe({
#si si se lecciono algo y esto es igual a 8 se habilita el boton de next
if(!is.null(input$etapa1) && length(input$etapa1) == 8) {
shinyjs::enable("next1")
#si no, lo deshabilita
} else {
shinyjs::disable("next1")
}
})
# Avanzar a etapa 2
#una vez seleccionados los 8 con observe event se indica que al hacer click en
#next 1 ejecute el siguiente codigo
observeEvent(input$next1, {
#si el tamaÃ±o de lo que se selecciono en la etapa 1 es igual a 8
if(length(input$etapa1) == 8) {
#se guarda en etapa1_ids lo que se selecciono en dicha estapa
selections$etapa1_ids <- input$etapa1
#ahora se guarda el nombre completo de los checbox escogidos
selections$etapa1_labels <- checkbox_labels[input$etapa1]
#ahora en la varable de ids no seleccionados guardamos los que no se
#escogieron
selections$no_seleccionadas_ids <- setdiff(checkbox_ids, input$etapa1)
#lo mismo pero para las etiquetas completas
selections$no_seleccionadas_labels <- checkbox_labels[selections$no_seleccionadas_ids]
#se pasa la etapa 2 y se pueda actualizar la pantalla
stage(2)
}
})
# UI para etapa 2
output$etapa2_ui <- renderUI({
if(stage() == 2 && length(selections$etapa1_ids) > 0) {
radioButtons(
"etapa2_input",
label = "Selecciona tu habilidad principal:",
choices = setNames(selections$etapa1_ids, selections$etapa1_labels)
)
} else {
p("Cargando opciones...")
}
})
# Avanzar a etapa 3
observeEvent(input$next2, {
if(!is.null(input$etapa2_input) && nchar(input$etapa2_input) > 0) {
selections$etapa2_id <- input$etapa2_input
selections$etapa2_label <- checkbox_labels[input$etapa2_input]
stage(3)
}
})
# UI para etapa 3
output$etapa3_ui <- renderUI({
if(stage() == 3 && length(selections$no_seleccionadas_ids) > 0) {
radioButtons(
"etapa3_input",
label = "Selecciona 1 habilidad de las no elegidas:",
choices = setNames(selections$no_seleccionadas_ids, selections$no_seleccionadas_labels)
)
} else {
p("Cargando opciones...")
}
})
# Avanzar a etapa 4
observeEvent(input$next3, {
if(!is.null(input$etapa3_input) && nchar(input$etapa3_input) > 0) {
selections$etapa3_id <- input$etapa3_input
selections$etapa3_label <- checkbox_labels[input$etapa3_input]
stage(4)
}
})
# Botones para retroceder
observeEvent(input$back1, {
stage(1)
})
observeEvent(input$back2, {
stage(2)
})
observeEvent(input$back3, {
stage(3)
})
# Reiniciar
observeEvent(input$reset, {
stage(1)
for(n in names(selections)) selections[[n]] <- character(0)
if(!is.null(input$etapa1)) updateCheckboxGroupInput(session, "etapa1", selected = character(0))
})
output$stage <- reactive({
stage()
})
outputOptions(output, "stage", suspendWhenHidden = FALSE)
# Resultados finales
output$resumen_final <- renderText({
if(stage() == 4) {
paste(
"RESUMEN FINAL:\n",
"=", rep("=", 30), "\n\n",
"ETAPA 1 - 8 Habilidades seleccionadas:\n",
paste("â€¢", selections$etapa1_labels, collapse = "\n"), "\n\n",
"ETAPA 2 - Habilidad principal:\n",
paste("â€¢", selections$etapa2_label), "\n\n",
"ETAPA 3 - De las no elegidas:\n",
paste("â€¢", selections$etapa3_label), "\n\n"
#"IDENTIFICADORES INTERNOS:\n",
#"Etapa 1: ", paste(selections$etapa1_ids, collapse = ", "), "\n",
#"Etapa 2: ", selections$etapa2_id, "\n",
#"Etapa 3: ", selections$etapa3_id
)
}
})
# Progreso
output$progreso <- renderText({
etapas <- c(
"1: Seleccionar 8 de 16 habilidades",
"2: Elegir tu habilidad principal",
"3: Seleccionar 1 de las 8 no elegidas",
"4: Ver resultados finales"
)
paste("Etapa", stage(), "de 4 -", etapas[stage()])
})
# Resumen actual
output$summary <- renderText({
text <- ""
if(stage() >= 2 && length(selections$etapa1_labels) > 0) {
text <- paste0(text,
"Etapa 1 (8 seleccionadas):\n",
paste("â€¢", selections$etapa1_labels, collapse = "\n"), "\n\n")
}
if(stage() >= 3 && nchar(selections$etapa2_label) > 0) {
text <- paste0(text,
"Etapa 2 (Habilidad principal):\n",
"â€¢ ", selections$etapa2_label, "\n\n")
}
if(stage() >= 4 && nchar(selections$etapa3_label) > 0) {
text <- paste0(text,
"Etapa 3 (De las no elegidas):\n",
"â€¢ ", selections$etapa3_label, "\n")
}
text
})
# Valores internos
#output$valores_internos <- renderText({
#  text <- ""
#
#  if(stage() >= 2 && length(selections$etapa1_ids) > 0) {
#    text <- paste0(text, "IDs Etapa 1: ", paste(selections$etapa1_ids, collapse = ", "), "\n")
#  }
#
#  if(stage() >= 3 && nchar(selections$etapa2_id) > 0) {
#    text <- paste0(text, "ID Etapa 2: ", selections$etapa2_id, "\n")
#  }
#
#  if(stage() >= 4 && nchar(selections$etapa3_id) > 0) {
#    text <- paste0(text, "ID Etapa 3: ", selections$etapa3_id)
#  }
#  text
#})
}
shinyApp(ui = ui, server = server)
runApp('C:/Users/UCQ/Downloads')
# AquÃ­ se definen las abreviaciones y el nombre completpo de los elementos
#laborales que es lo que vera el usuario
checkbox_ids <- c(
"ana","admin","concep","expre",
"inte","redac","aspt","imp",
"plan","aspi","res","ino",
"entf","org","aspc","aspf"
)
checkbox_labels <- c(
ana = "AnÃ¡lisis",
admin = "AdministraciÃ³n",
concep = "ConceptualizaciÃ³n",
expre = "ExpresiÃ³n de ideas",
inte = "IntegraciÃ³n",
redac = "RedacciÃ³n",
aspt = "Aspectos tÃ©cnicos",
imp = "ImplantaciÃ³n",
plan = "PlaneaciÃ³n",
aspi = "Aspectos interpersonales",
res = "ResoluciÃ³n de problemas lÃ³gicos",
ino = "InnovaciÃ³n",
entf = "Entrenamiento / FormaciÃ³n",
org = "OrganizaciÃ³n",
aspc = "Aspectos creativos",
aspf = "Aspectos financieros"
)
etapa1<-checkbox_ids[1:8]
setdiff(checkbox_ids, input$etapa1)
setdiff(checkbox_ids, etapa1)
checkbox_ids
no_seleccionadas_ids<-setdiff(checkbox_ids, input$etapa1)
no_seleccionadas_ids<-setdiff(checkbox_ids, etapa1)
checkbox_labels[no_seleccionadas_ids]
no_seleccionadas_labels<-checkbox_labels[no_seleccionadas_ids]
no_seleccionadas_labels
runApp('C:/Users/UCQ/Downloads')
shiny::runApp()
runApp()
runApp()
